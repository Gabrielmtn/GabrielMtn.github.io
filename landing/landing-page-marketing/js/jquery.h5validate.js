//Plugin via http://ericleads.com/h5validate/
!function(e){"use strict";var t=window.console||function(){},a={defaults:{debug:!1,RODom:!1,patternLibrary:{phone:/([\+][0-9]{1,3}([ \.\-])?)?([\(][0-9]{1,6}[\)])?([0-9A-Za-z \.\-]{1,32})(([A-Za-z \:]{1,11})?[0-9]{1,4}?)/,email:/((([a-zA-Z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-zA-Z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?/,url:/(https?|ftp):\/\/(((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?/,number:/-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?/,dateISO:/\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}/,alpha:/[a-zA-Z]+/,alphaNumeric:/\w+/,integer:/-?\d+/},classPrefix:"h5-",errorClass:"ui-state-error",validClass:"ui-state-valid",activeClass:"active",requiredClass:"required",requiredAttribute:"required",patternAttribute:"pattern",errorAttribute:"data-h5-errorid",customEvents:{validate:!0},kbSelectors:":input:not(:button):not(:disabled):not(.novalidate)",focusout:!0,focusin:!1,change:!0,keyup:!1,activeKeyup:!0,mSelectors:'[type="range"]:not(:disabled):not(.novalidate), :radio:not(:disabled):not(.novalidate), :checkbox:not(:disabled):not(.novalidate), select:not(:disabled):not(.novalidate), option:not(:disabled):not(.novalidate)',click:!0,requiredVar:"h5-required",patternVar:"h5-pattern",stripMarkup:!0,submit:!0,focusFirstInvalidElementOnSubmit:!0,validateOnSubmit:!0,invalidCallback:function(){},validCallback:function(){},allValidSelectors:":input:visible:not(:button):not(:disabled):not(.novalidate)",markInvalid:function(t){var a=e(t.element),i=e(t.errorID);return a.addClass(t.errorClass).removeClass(t.validClass),a.addClass(t.settings.activeClass),i.length&&(a.attr("title")&&i.text(a.attr("title")),i.show()),a.data("valid",!1),t.settings.invalidCallback.call(t.element,t.validity),a},markValid:function(t){var a=e(t.element),i=e(t.errorID);return a.addClass(t.validClass).removeClass(t.errorClass),i.length&&i.hide(),a.data("valid",!0),t.settings.validCallback.call(t.element,t.validity),a},unmark:function(t){var a=e(t.element);return a.removeClass(t.errorClass).removeClass(t.validClass),a.form.find("#"+t.element.id).removeClass(t.errorClass).removeClass(t.validClass),a}}},i=a.defaults,u=i.patternLibrary,r=function(t){return e.extend({customError:t.customError||!1,patternMismatch:t.patternMismatch||!1,rangeOverflow:t.rangeOverflow||!1,rangeUnderflow:t.rangeUnderflow||!1,stepMismatch:t.stepMismatch||!1,tooLong:t.tooLong||!1,typeMismatch:t.typeMismatch||!1,valid:t.valid||!0,valueMissing:t.valueMissing||!1},t)},l={isValid:function(t,a){var i=e(this);return a=t&&a||{},a.revalidate!==!1&&i.trigger("validate"),i.data("valid")},allValid:function(t,a){var i,u,r=!0,l=[],F=e(this),n=[],d=function(e,t){t.e=e,l.push(t)},s=e.extend({},t,a);return a=a||{},F.trigger("formValidate",{settings:e.extend(!0,{},s)}),F.undelegate(s.allValidSelectors,".allValid",d),F.delegate(s.allValidSelectors,"validated.allValid",d),i=F.find(s.allValidSelectors),u=i.filter(function(){var e;if("INPUT"===this.tagName&&"radio"===this.type){if(e=this.name,n[e]===!0)return!1;n[e]=!0}return!0}),u.each(function(){var t=e(this);r=t.h5Validate("isValid",a)&&r}),F.trigger("formValidated",{valid:r,elements:l}),r},validate:function(a){var i,u=e(this),l=u.filter("[pattern]")[0]?u.attr("pattern"):!1,F=new RegExp("^(?:"+l+")$"),n=null,d=u.is("[type=checkbox]")?u.is(":checked"):u.is("[type=radio]")?(n=u.parents("form").find('input[name="'+u.attr("name")+'"]')).filter(":checked").length>0:u.val(),s=a.errorClass,o=a.validClass,c=u.attr(a.errorAttribute)||!1,v=c?"#"+c.replace(/(:|\.|\[|\])/g,"\\$1"):!1,f=!1,h=r({element:this,valid:!0}),D=e("<input required>");f=D.filter("[required]")&&D.filter("[required]").length?u.filter("[required]").length&&"false"!==u.attr("required"):void 0!==u.attr("required"),a.debug&&window.console&&(t.log('Validate called on "'+d+'" with regex "'+F+'". Required: '+f),t.log("Regex test: "+F.test(d)+", Pattern: "+l)),i=parseInt(u.attr("maxlength"),10),!isNaN(i)&&d.length>i&&(h.valid=!1,h.tooLong=!0),f&&!d?(h.valid=!1,h.valueMissing=!0):l&&!F.test(d)&&d?(h.valid=!1,h.patternMismatch=!0):a.RODom||a.markValid({element:this,validity:h,errorClass:s,validClass:o,errorID:v,settings:a}),h.valid||a.RODom||a.markInvalid({element:this,validity:h,errorClass:s,validClass:o,errorID:v,settings:a}),u.trigger("validated",h),null!==n&&a.alreadyCheckingRelatedRadioButtons!==!0&&(a.alreadyCheckingRelatedRadioButtons=!0,n.not(u).trigger("validate"),a.alreadyCheckingRelatedRadioButtons=!1)},delegateEvents:function(t,a,i,u){var r={},l=0,F=function(){u.validate.call(this,u)};e.each(a,function(e,t){t&&(r[e]=e)});for(l in r)r.hasOwnProperty(l)&&e(i).delegate(t,r[l]+".h5Validate",F);return i},bindDelegation:function(t){var a,i=e(this);return e.each(u,function(a,i){var u=i.toString();u=u.substring(1,u.length-1),e("."+t.classPrefix+a).attr("pattern",u)}),a=i.filter("form").add(i.find("form")).add(i.parents("form")),a.attr("novalidate","novalidate").submit(F),a.find("input[formnovalidate][type='submit']").click(function(){e(this).closest("form").unbind("submit",F)}),this.each(function(){var e={focusout:t.focusout,focusin:t.focusin,change:t.change,keyup:t.keyup},a={click:t.click},i={keyup:t.activeKeyup};t.delegateEvents(":input",t.customEvents,this,t),t.delegateEvents(t.kbSelectors,e,this,t),t.delegateEvents(t.mSelectors,a,this,t),t.delegateEvents(t.activeClassSelector,i,this,t),t.delegateEvents("textarea[maxlength]",{keyup:!0},this,t)})}},F=function(t){var a,i,u=s.call(this);if(u.submit===!0){if(a=e(this),i=a.h5Validate("allValid",{revalidate:u.validateOnSubmit===!0}),i!==!0&&(t.preventDefault(),u.focusFirstInvalidElementOnSubmit===!0)){var r=e(u.allValidSelectors,a).filter(function(){return e(this).h5Validate("isValid",{revalidate:!1})!==!0});r.first().focus()}return i}},n=[],d=function(t){var a=e.extend({},i,t,l),u=a.classPrefix+a.activeClass;return e.extend(a,{activeClass:u,activeClassSelector:"."+u,requiredClass:a.classPrefix+a.requiredClass,el:this})},s=function(){var t=e(this).closest("[data-h5-instanceId]");return n[t.attr("data-h5-instanceId")]},o=function(t){var a=n.push(t)-1;t.RODom!==!0&&e(this).attr("data-h5-instanceId",a),e(this).trigger("instance",{"data-h5-instanceId":a})};e.h5Validate={addPatterns:function(e){var t,a=i.patternLibrary;for(t in e)e.hasOwnProperty(t)&&(a[t]=e[t]);return a},validValues:function(t,a){var i,u=0,r=a.length,l="";for(u=0;r>u;u+=1)l=l?l+"|"+a[u]:a[u];i=new RegExp("^(?:"+l+")$"),e(t).data("regex",i)}},e.fn.h5Validate=function(t){var a,i,u;return"string"==typeof t&&"function"==typeof l[t]?(u=s.call(this),i=[].slice.call(arguments,0),a=t,i.shift(),i=e.merge([u],i),u[a].apply(this,i)):(u=d.call(this,t),o.call(this,u),l.bindDelegation.call(this,u))}}(jQuery);